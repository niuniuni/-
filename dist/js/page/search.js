"use strict";define(["jquery","template"],function(r,s){var c=window.localStorage,n=JSON.parse(c.getItem("searcharr"))||[];r.getJSON("/book/searchKey",function(e){var t=e.ads.concat(n);console.log(t),e.ads=t,s(r(".searchtext").html(),e,".searchresult")}),r(".search-btn").on("click",function(){var a=r.trim(r(this).prev().val());r.ajax({url:"/book/search",data:{title:a},dataType:"json",success:function(e){var t=e.items.filter(function(e,t){return new RegExp(a,"g").test(e.title)});for(key in n)n[key].ad_name==a&&(console.log(n[key]),n.splice(key,1));t.length&&(n.push({ad_name:a}),c.setItem("searcharr",JSON.stringify(n))),r(".searchresult").html(""),s(r(".searchlist").html(),{items:t},".searchresult")}})})});